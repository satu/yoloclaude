# Claude Instructions for YoloClaude

## Project Overview

YoloClaude is a Docker-based sandbox for running AI coding agents. It provides isolation while mounting the user's source code and Claude CLI.

## Key Files

- `yolo` - Main CLI script (bash). Parses config, generates docker-compose env, runs docker commands.
- `config.yaml` - User configuration (ports, mounts, resources)
- `Dockerfile` - Ubuntu 24.04 base image with dev tools
- `docker-compose.yaml` - Generated by `yolo` script from config

## Architecture

1. User edits `config.yaml`
2. `./yolo build|start` parses config and generates `.env` file
3. Docker Compose uses `.env` to substitute variables in `docker-compose.yaml`
4. Named volume `yoloclaude-home` persists `/home/dev`
5. Bind mounts overlay specific paths (`src`, `.claude`, etc.)

## Common Tasks

### Adding a new config option

1. Add the option to `config.yaml` with a sensible default
2. Add parsing logic in `yolo` script's `generate_env()` function
3. Reference the variable in `docker-compose.yaml` using `${VAR_NAME}`

### Modifying the base image

Edit `Dockerfile`. Users will need to run `./yolo rebuild` to pick up changes.

### Testing changes

```bash
./yolo rebuild  # Full rebuild, no cache
./yolo shell    # Enter and test
```

## Notes

- The `yolo` script uses simple bash YAML parsing. It works for our flat config but won't handle complex nested YAML.
- Port 5000 is commonly used by other services (AirPlay, etc.), so default is 5001.
- Ubuntu 24.04 has a pre-existing `ubuntu` user with UID 1000, which the Dockerfile removes before creating `dev`.
